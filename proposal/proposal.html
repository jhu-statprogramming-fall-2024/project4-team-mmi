<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Team: Juanyu Zhang, Yunyi Ru, Yuzi Zhang">
<meta name="dcterms.date" content="2024-11-15">

<title>Final Project Proposal: Weather-Disease Correlation Explorer</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="proposal_files/libs/clipboard/clipboard.min.js"></script>
<script src="proposal_files/libs/quarto-html/quarto.js"></script>
<script src="proposal_files/libs/quarto-html/popper.min.js"></script>
<script src="proposal_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="proposal_files/libs/quarto-html/anchor.min.js"></script>
<link href="proposal_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="proposal_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="proposal_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="proposal_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="proposal_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final Project Proposal: <em>Weather-Disease Correlation Explorer</em></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Team: Juanyu Zhang, Yunyi Ru, Yuzi Zhang </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 15, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><em>Using quarto, write up a project proposal andsubmit the PDF. The final project proposal should include the following information</em>:</p>
<p><strong>1. The title of your project and the team members names</strong></p>
<p>(As shown above)</p>
<p><strong>2. You should describe a research or data analysis question and explain its importance</strong></p>
<p>We want to investigate the correlation between climate and weather-related conditions and outbreaks of two respiratory viruses, influenza and respiratory syncytial virus (RSV).</p>
<p>Influenza is an RNA virus from the <em>Orthomyxoviridae</em> family that frequently mutates, causing seasonal epidemics, while RSV is an RNA virus from the <em>Paramyxoviridae</em> family that primarily affects young children and the elderly, often leading to severe lower respiratory infections.</p>
<p>Both viruses pose significant public health challenges due to their widespread transmission and potential for severe disease.</p>
<p><strong>3. You should summarize work that already exists (if it does)</strong></p>
<p>Climate and weather conditions can influence the activity and spread of both viruses. Studies have suggested that factors like cold temperatures, low indoor humidity, limited sunlight, and rapid weather changes may increase the risk of outbreaks <span class="citation" data-cites="carter-templeton_associations_2022">(<a href="#ref-carter-templeton_associations_2022" role="doc-biblioref">Carter-Templeton et al. 2022</a>)</span> <span class="citation" data-cites="chong_association_2022">(<a href="#ref-chong_association_2022" role="doc-biblioref">Chong et al. 2022</a>)</span> <span class="citation" data-cites="fdez-arroyabe_effects_2021">(<a href="#ref-fdez-arroyabe_effects_2021" role="doc-biblioref">Fdez-Arróyabe et al. 2021</a>)</span> <span class="citation" data-cites="linssen_association_2021">(<a href="#ref-linssen_association_2021" role="doc-biblioref">Linssen et al. 2021</a>)</span>.</p>
<p><strong>4. You should outline the work you plan to do</strong></p>
<p>In this project, we plan to integrate weather data and disease incidence data together to perform correlation and regression analysis, and to build an interactive dashboard showing those relationships. If possible, we also want to build a machine learning model to predict potential disease outbreaks based on weather data.</p>
<p><strong>5. You should demonstrate you have access to the data, describe the data, and propose how you will collect the data</strong></p>
<p>Weather data will be collected through the <a href="https://www.weather.gov/documentation/services-web-api">National Weather Service (NWS) API</a> <span class="citation" data-cites="us_department_of_commerce_api_nodate">(<a href="#ref-us_department_of_commerce_api_nodate" role="doc-biblioref">US Department of Commerce n.d.</a>)</span> or <a href="https://openweathermap.org/api">Openweather API</a> <span class="citation" data-cites="noauthor_weather_nodate">(<a href="#ref-noauthor_weather_nodate" role="doc-biblioref"><span>“Weather <span>API</span> - <span>OpenWeatherMap</span>”</span> n.d.</a>)</span>.</p>
<p>Disease incidence data will be collected from the <a href="https://www.cdc.gov/nndss/data-statistics/infectious-tables/index.html">CDC National Notifiable Diseases Surveillance System (NNDSS)</a> <span class="citation" data-cites="noauthor_notifiable_2023">(<a href="#ref-noauthor_notifiable_2023" role="doc-biblioref"><span>“Notifiable <span>Infectious</span> <span>Disease</span> <span>Tables</span> <span></span> <span>CDC</span>”</span> 2023</a>)</span>.</p>
<p>All of the data sources mentioned above are open to the public and downloadable from the website.</p>
<p><strong>6. You should describe the programming paradigms you plan to use and why it makes sense to combine them for your project</strong></p>
<p>We plan to use a combination of functional programming and object-oriented programming (OOP) for this project. This paradigm is well-suited for our project because it emphasizes immutability and reusable functions, which align with our need to process data repeatedly across different subsets and analyses. OOP will be used for structuring the machine learning model and data pipeline.</p>
<p><strong>7. You should describe any packages and/or software you plan to use</strong></p>
<p>Data Collection :</p>
<ul>
<li><code>httr</code> and <code>jsonlite</code>: For fetching weather data via APIs.</li>
</ul>
<p>Data Analysis:</p>
<ul>
<li><code>dplyr</code> and <code>tidyr</code>: For advanced data manipulation.</li>
<li><code>stats</code> and <code>lmtest</code>: For performing correlation and regression analyses.</li>
<li><code>lubridate</code>: For handling temporal data efficiently.</li>
</ul>
<p>Visualization:</p>
<ul>
<li><code>ggplot2</code>: For static and interactive visualizations of weather and disease patterns.</li>
</ul>
<p><strong>8. You should briefly describe the data analytic product you plan to build.</strong></p>
<p>The final product will be an interactive dashboard, which will include:</p>
<ul>
<li><p>Weather-Disease Correlation Explorer: Users can select specific weather variables (e.g., temperature, humidity) and see their correlation with disease incidence over time.</p></li>
<li><p>Seasonal Trend Analysis: Visualizations of trends for specific locations, highlighting high-risk periods.</p></li>
<li><p>Customizable Reports: Users can generate downloadable summaries of findings in PDF or HTML format.</p></li>
</ul>
<p><strong>9. You should describe a tentative timeline for the proposal</strong></p>
<ul>
<li>Nov.&nbsp;18 - Dec.&nbsp;5: Collect and clean data</li>
<li>Dec.&nbsp;5 - Dec.&nbsp;10: Visualize data</li>
</ul>
<p><strong>10. You should describe how the tasks will be split amongst the team members</strong></p>
<ul>
<li>Data Collection: Yuzi</li>
<li>Data Analysis and Visualization: Yunyi and Juanyu</li>
</ul>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-carter-templeton_associations_2022" class="csl-entry" role="listitem">
Carter-Templeton, Heather, Gary F. Templeton, Leslie H. Nicoll, Latrice Maxie, Theresa S. Kittle, Susan A. Jasko, Eric E. Carpenter, and Karen A. Monsen. 2022. <span>“Associations Between Weather-Related Data and Influenza Reports: <span>A</span> Pilot Study and Related Policy Implications.”</span> <em>Applied Nursing Research: ANR</em> 67 (October): 151413. <a href="https://doi.org/10.1016/j.apnr.2021.151413">https://doi.org/10.1016/j.apnr.2021.151413</a>.
</div>
<div id="ref-chong_association_2022" class="csl-entry" role="listitem">
Chong, Ka Chun, Yu Chen, Emily Ying Yang Chan, Steven Yuk Fai Lau, Holly Ching Yu Lam, Pin Wang, William Bernard Goggins, et al. 2022. <span>“Association of Weather, Air Pollutants, and Seasonal Influenza with Chronic Obstructive Pulmonary Disease Hospitalization Risks.”</span> <em>Environmental Pollution (Barking, Essex: 1987)</em> 293 (January): 118480. <a href="https://doi.org/10.1016/j.envpol.2021.118480">https://doi.org/10.1016/j.envpol.2021.118480</a>.
</div>
<div id="ref-fdez-arroyabe_effects_2021" class="csl-entry" role="listitem">
Fdez-Arróyabe, Pablo, Alberto Marti-Ezpeleta, Dominic Royé, and Ana Santurtún Zarrabeitia. 2021. <span>“Effects of Circulation Weather Types on Influenza Hospital Admissions in <span>Spain</span>.”</span> <em>International Journal of Biometeorology</em> 65 (8): 1325–37. <a href="https://doi.org/10.1007/s00484-021-02107-y">https://doi.org/10.1007/s00484-021-02107-y</a>.
</div>
<div id="ref-linssen_association_2021" class="csl-entry" role="listitem">
Linssen, Rosalie S., Bibiche den Hollander, Louis Bont, Job B. M. van Woensel, Reinout A. Bem, and null On Behalf Of The Pice Study Group. 2021. <span>“The <span>Association</span> Between <span>Weather</span> <span>Conditions</span> and <span>Admissions</span> to the <span>Paediatric</span> <span>Intensive</span> <span>Care</span> <span>Unit</span> for <span>Respiratory</span> <span>Syncytial</span> <span>Virus</span> <span>Bronchiolitis</span>.”</span> <em>Pathogens (Basel, Switzerland)</em> 10 (5): 567. <a href="https://doi.org/10.3390/pathogens10050567">https://doi.org/10.3390/pathogens10050567</a>.
</div>
<div id="ref-noauthor_notifiable_2023" class="csl-entry" role="listitem">
<span>“Notifiable <span>Infectious</span> <span>Disease</span> <span>Tables</span> <span></span> <span>CDC</span>.”</span> 2023. <a href="https://www.cdc.gov/nndss/data-statistics/infectious-tables/index.html">https://www.cdc.gov/nndss/data-statistics/infectious-tables/index.html</a>.
</div>
<div id="ref-us_department_of_commerce_api_nodate" class="csl-entry" role="listitem">
US Department of Commerce, NOAA. n.d. <span>“<span>API</span> <span>Web</span> <span>Service</span>.”</span> Accessed November 18, 2024. <a href="https://www.weather.gov/documentation/services-web-api">https://www.weather.gov/documentation/services-web-api</a>.
</div>
<div id="ref-noauthor_weather_nodate" class="csl-entry" role="listitem">
<span>“Weather <span>API</span> - <span>OpenWeatherMap</span>.”</span> n.d. Accessed November 18, 2024. <a href="https://openweathermap.org/api">https://openweathermap.org/api</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>